import{W as R,r as m,j as e,d as w,Y as B,a as P}from"./app-LdO5xby3.js";import{T as k,a as W,b as O,c as l,d as z,e as r}from"./table-DVnI7eNv.js";import{c as v,B as _,a as G,b as Y}from"./button-B4OTIyGS.js";import{A as q}from"./admin_layout-CKLHWd0f.js";import{l as J,P as K}from"./lodash-D7_sRmDr.js";import{I as y}from"./input-DqOg99j5.js";import{D as U,a as A,b as M,c as F,d as H}from"./index-CKWJj8vZ.js";import{L as D}from"./label-DSsEh3nW.js";import{S as E,a as V,b as g,c as S,d as b}from"./select-DxLacraJ.js";import{T as X}from"./trash-2-DR9Mtrq7.js";import"./sheet-CEiO1oB5.js";import"./index-Bk9cuW67.js";import"./school-CJS83_n0.js";function Z({isOpen:n,onClose:i}){const{data:t,setData:d,post:u,processing:N,errors:s,reset:p}=R({userId:"",role:"",schoolId:""}),[f,x]=m.useState(""),[c,I]=m.useState(""),[j,o]=m.useState([]),[C,T]=m.useState([]),L=a=>{a.preventDefault(),u("/roles",{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p(),i()}})},Q=async a=>{if(a.length>=3)try{const h=await w.get(`/users/search?q=${a}`);o(h.data.slice(0,5))}catch(h){console.error("Error searching users:",h)}else o([])},$=async a=>{if(a.length>=3)try{const h=await w.get(`/schools/search?q=${a}`);T(h.data.slice(0,5))}catch(h){console.error("Error searching schools:",h)}else T([])};return e.jsxDEV(U,{open:n,onOpenChange:i,children:e.jsxDEV(A,{children:[e.jsxDEV(M,{children:e.jsxDEV(F,{children:"Add New Role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:92,columnNumber:11},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:91,columnNumber:9},this),e.jsxDEV("form",{onSubmit:L,children:[e.jsxDEV("div",{className:"grid items-center w-full gap-4",children:[e.jsxDEV("div",{className:"flex flex-col space-y-1.5",children:[e.jsxDEV(D,{htmlFor:"userId",children:"User"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:97,columnNumber:15},this),e.jsxDEV(y,{type:"text",value:f,onChange:a=>{x(a.target.value),Q(a.target.value)},placeholder:"Search for a user"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:98,columnNumber:15},this),j.length>0&&e.jsxDEV(E,{value:t.userId,onValueChange:a=>d("userId",a),children:[e.jsxDEV(V,{id:"userId",children:e.jsxDEV(g,{placeholder:"Select a user"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:110,columnNumber:21},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:109,columnNumber:19},this),e.jsxDEV(S,{children:j.map(a=>e.jsxDEV(b,{value:a.id.toString(),children:a.fullName},a.id,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:114,columnNumber:23},this))},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:112,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:108,columnNumber:17},this),s.userId&&e.jsxDEV("p",{className:"text-sm text-red-500",children:v(s.userId)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:122,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:96,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col space-y-1.5",children:[e.jsxDEV(D,{htmlFor:"role",children:"Role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:126,columnNumber:15},this),e.jsxDEV(E,{value:t.role,onValueChange:a=>d("role",a),children:[e.jsxDEV(V,{id:"role",children:e.jsxDEV(g,{placeholder:"Select a role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:129,columnNumber:19},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:128,columnNumber:17},this),e.jsxDEV(S,{children:[e.jsxDEV(b,{value:"admin",children:"Admin"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:132,columnNumber:19},this),e.jsxDEV(b,{value:"teacher",children:"Teacher"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:133,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:131,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:127,columnNumber:15},this),s.role&&e.jsxDEV("p",{className:"text-sm text-red-500",children:v(s.role)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:137,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:125,columnNumber:13},this),e.jsxDEV("div",{className:"flex flex-col space-y-1.5",children:[e.jsxDEV(D,{htmlFor:"schoolId",children:"School"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:141,columnNumber:15},this),e.jsxDEV(y,{type:"text",value:c,onChange:a=>{I(a.target.value),$(a.target.value)},placeholder:"Search for a school"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:142,columnNumber:15},this),C.length>0&&e.jsxDEV(E,{value:t.schoolId,onValueChange:a=>d("schoolId",a),children:[e.jsxDEV(V,{id:"schoolId",children:e.jsxDEV(g,{placeholder:"Select a school"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:154,columnNumber:21},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:153,columnNumber:19},this),e.jsxDEV(S,{children:C.map(a=>e.jsxDEV(b,{value:a.id.toString(),children:a.name},a.id,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:158,columnNumber:23},this))},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:156,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:152,columnNumber:17},this),s.schoolId&&e.jsxDEV("p",{className:"text-sm text-red-500",children:v(s.schoolId)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:166,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:95,columnNumber:11},this),e.jsxDEV(H,{children:e.jsxDEV(_,{type:"submit",disabled:N,className:"mt-3",children:"Save"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:171,columnNumber:13},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:170,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:94,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:90,columnNumber:7},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/create_role_modal.tsx",lineNumber:89,columnNumber:5},this)}function ee({isOpen:n,onClose:i,role:t}){const{data:d,setData:u,put:N,processing:s,errors:p,reset:f}=R({role:t.role}),x=c=>{c.preventDefault(),N(`/roles/${t.id}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{f(),i()}})};return e.jsxDEV(U,{open:n,onOpenChange:i,children:e.jsxDEV(A,{children:[e.jsxDEV(M,{children:e.jsxDEV(F,{children:"Edit Role/Staff Data"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:49,columnNumber:11},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:48,columnNumber:9},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{children:[e.jsxDEV("span",{className:"font-bold mr-3",children:"Email:"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:53,columnNumber:13},this),t.user.email]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:52,columnNumber:11},this),e.jsxDEV("p",{children:[e.jsxDEV("span",{className:"font-bold mr-3",children:"User Name:"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:57,columnNumber:13},this),t.user.fullName]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:56,columnNumber:11},this),e.jsxDEV("p",{children:[e.jsxDEV("span",{className:"font-bold mr-3",children:"School Name:"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:65,columnNumber:13},this),t.school.name]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:64,columnNumber:11},this),e.jsxDEV(_,{className:t.school.status==="active"?"bg-green-500":"bg-gray-400",children:t.school.status},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("form",{onSubmit:x,children:[e.jsxDEV("div",{className:"grid items-center w-full gap-4",children:e.jsxDEV("div",{className:"flex flex-col space-y-1.5",children:[e.jsxDEV(D,{htmlFor:"role",children:"Role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:87,columnNumber:15},this),e.jsxDEV(E,{value:d.role,onValueChange:c=>u("role",c),children:[e.jsxDEV(V,{id:"role",children:e.jsxDEV(g,{placeholder:"Select a role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:93,columnNumber:19},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:92,columnNumber:17},this),e.jsxDEV(S,{children:[e.jsxDEV(b,{value:"admin",children:"Admin"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:96,columnNumber:19},this),e.jsxDEV(b,{value:"teacher",children:"Teacher"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:97,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:95,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:88,columnNumber:15},this),p.role&&e.jsxDEV("p",{className:"text-sm text-red-500",children:v(p.role)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:101,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:86,columnNumber:13},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:85,columnNumber:11},this),e.jsxDEV(H,{children:e.jsxDEV(_,{type:"submit",disabled:s,className:"mt-3",children:"Save"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:106,columnNumber:13},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:105,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:84,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:47,columnNumber:7},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/components/modals/edit_role_modal.tsx",lineNumber:46,columnNumber:5},this)}function Ne(n){const[i,t]=m.useState(!1),[d,u]=m.useState(!1),[N,s]=m.useState(),p=n.roles.data,f=o=>{s(o),u(!0)},{data:x,setData:c,get:I}=R({search:"",page:n.roles.meta.currentPage});m.useEffect(()=>(j(),j.cancel),[x.search]);const j=J.debounce(()=>{I("/roles",{preserveState:!0,preserveScroll:!0,only:["roles"]})},300);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(B,{title:"Homepage"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:77,columnNumber:7},this),e.jsxDEV(q,{children:e.jsxDEV("div",{className:"container p-4 mx-auto",children:[e.jsxDEV("h1",{className:"mb-4 text-2xl font-bold",children:"Role List"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:80,columnNumber:11},this),e.jsxDEV(_,{className:"mb-4",onClick:()=>t(!0),children:"Add New Role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:81,columnNumber:11},this),e.jsxDEV(y,{type:"text",placeholder:"Search roles...",value:x.search,onChange:o=>c("search",o.target.value),className:"max-w-xs"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:84,columnNumber:11},this),e.jsxDEV(k,{children:[e.jsxDEV(W,{children:e.jsxDEV(O,{children:[e.jsxDEV(l,{children:"Users ID"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:94,columnNumber:17},this),e.jsxDEV(l,{children:"Users Name"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:95,columnNumber:17},this),e.jsxDEV(l,{children:"Users Email"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:96,columnNumber:17},this),e.jsxDEV(l,{children:"Schools ID"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:97,columnNumber:17},this),e.jsxDEV(l,{children:"Schools Name"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:98,columnNumber:17},this),e.jsxDEV(l,{children:"Schools Email"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:99,columnNumber:17},this),e.jsxDEV(l,{children:"Role"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:100,columnNumber:17},this),e.jsxDEV(l,{children:"Actions"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:101,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:93,columnNumber:15},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:92,columnNumber:13},this),e.jsxDEV(z,{children:p.map(o=>e.jsxDEV(O,{children:[e.jsxDEV(r,{children:o.user.id},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:107,columnNumber:19},this),e.jsxDEV(r,{children:o.user.fullName},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:108,columnNumber:19},this),e.jsxDEV(r,{children:o.user.email},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:109,columnNumber:19},this),e.jsxDEV(r,{children:o.school.id},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:110,columnNumber:19},this),e.jsxDEV(r,{children:o.school.name},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:111,columnNumber:19},this),e.jsxDEV(r,{children:o.school.email},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:112,columnNumber:19},this),e.jsxDEV(r,{children:o.role},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:113,columnNumber:19},this),e.jsxDEV(r,{children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(_,{onClick:()=>f(o),children:"Edit"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:116,columnNumber:23},this),e.jsxDEV(P,{className:G(Y()),href:`/roles/${o.id}`,as:"button",method:"delete",children:e.jsxDEV(X,{},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:124,columnNumber:25},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:118,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:115,columnNumber:21},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:114,columnNumber:19},this)]},o.id,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:106,columnNumber:17},this))},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:104,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:91,columnNumber:11},this),e.jsxDEV(K,{paginationData:n.roles.meta,baseRoute:"/roles"},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV(Z,{isOpen:i,onClose:()=>t(!1)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:134,columnNumber:11},this),N&&e.jsxDEV(ee,{role:N,isOpen:d,onClose:()=>{s(null),u(!1)}},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:79,columnNumber:9},this)},void 0,!1,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:78,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ahmed/projects/attendance/inertia/pages/roles/roles_index.tsx",lineNumber:76,columnNumber:5},this)}export{Ne as default};
